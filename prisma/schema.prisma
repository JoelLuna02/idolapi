generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DBIDOLAPI_URL") // uses connection pooling
  directUrl = env("DBIDOLAPI_URL_NON_POOLING") // uses a direct connection
}

model Hashtag {
  id      Int     @id @default(autoincrement())
  general String? @unique
  stream  String? @unique
  fanart  String?
  memes   String?
  vtuber  VTuber  @relation(fields: [vtid], references: [id])
  vtid    Int     @unique // Unique for one to one relationship
}

model Social {
  id          Int     @id @default(autoincrement())
  application String? @default("Twitter")
  socialurl   String? @unique
  vtuber      VTuber  @relation(fields: [vtid], references: [id])
  vtid        Int
}

model Song {
  id          Int     @id @default(autoincrement())
  name        String? @unique
  album       String?
  releasedate String?
  compositor  String?
  mixing      String?
  lyrics      String?
  vtuber      VTuber  @relation(fields: [vtid], references: [id])
  vtid        Int
}

model VTuber {
  id        Int      @id @default(autoincrement())
  fullname  String   @unique
  fanname   String   @unique
  phrase    String
  debut     DateTime @default(now())
  branch    String   @default("HE")
  unit      String
  hashtag   Hashtag?
  emoji     String
  youtube   String   @unique
  avatarurl String
  graduated Boolean  @default(false)
  gender    String   @default("Female")
  age       Int
  birthday  String
  zodiac    String
  height    Float    @default(1.66)
  social    Social[]
  songs     Song[]
}

model User {
  id        Int      @id @default(autoincrement())
  firstname String
  lastname  String
  phone     Int
  createdAt DateTime @default(now())
  email     String   @unique
  username  String   @unique
  password  String   @unique
  isAdmin   Boolean  @default(false)
}

model File {
  id        Int      @id @default(autoincrement())
  filename  String   @unique
  size      Int
  mimetype  String
  createdAt DateTime @default(now())
  data      Bytes
}

model Staff {
  id         Int      @id @default(autoincrement())
  name       String   @unique
  roles      String[]
  profileurl String
  twitter    String   @unique
}
